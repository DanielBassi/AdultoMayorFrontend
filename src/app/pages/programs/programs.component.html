<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper">
    <!-- Content Header (Page header) -->


    <!-- Main content -->
    <section class="content">
        <div class="container-fluid">
            <div class="row">
              <div class="col-lg-2 mb-2">
                <dx-button type="success" text="Agregar Programa" icon="fa fa-plus" (onClick)="showPopUp()"></dx-button>
              </div>
                <div class="col-12">

                    <div class="card">

                        <!-- https://js.devexpress.com/Demos/WidgetsGallery/Demo/DataGrid/PopupEditing/Angular/Light/ -->
                      <dx-data-grid
                        id="gridContainer"
                        [dataSource]="programas"
                        [remoteOperations]="false"
                        [allowColumnReordering]="true"
                        [rowAlternationEnabled]="true"
                        [showBorders]="true"
                      >
                      <dxo-filter-row [visible]="true"></dxo-filter-row>
                      <dxo-paging [enabled]="true"></dxo-paging>
                      <dxi-column dataField="nombre" caption="Nombre Programa"></dxi-column>
                      <dxi-column caption="acciones" cellTemplate="fichaCellTemplate" alignment="center"[width]="150">
                        <div *dxTemplate="let data of 'fichaCellTemplate'" style="display: block;" class="table-content-icons">
                          <!-- <dx-button icon="fas fa-info" class="positionButon" hint="Detalles"  type="success"  (onClick)="detailsPrograma(data.data)"></dx-button> -->
                          <!-- <dx-button icon="fas fa-edit" class="positionButon" hint="Editar"  type="default"  (onClick)="editPrograma(data.data)"></dx-button> -->
                          <!-- <dx-button icon="fas fa-window-close"class="positionButon" hint="Eliminar"  type="danger" (onClick)="deletePrograma(data.data)"></dx-button> -->
                          <!-- <dx-button icon="fas fa-folder" class="positionButon" hint="Eliminar"  type="success"  stylingMode="outlined"></dx-button> -->

                        </div>
                      </dxi-column>


                      </dx-data-grid>
                    </div>
                    <!-- /.card -->
                    <dx-popup [width]="800" [height]="550" [showTitle]="true" title="Crear nuevo Programa" [dragEnabled]="false"
                      [hideOnOutsideClick]="true" [showCloseButton]="true" [(visible)]="popupVisible">

                        <form (submit)="formSubmit($event)" enctype="multipart/form-data">

                          <dx-form id="form" [colCount]="2" [(formData)]="programa" labelLocation="top" [disabled]="false" [readOnly]="false">
                            <!-- creacion del programa -->
                            <dxi-item itemType="group" [colCount]="2" [colSpan]="2">
                              <dxi-item [colSpan]="1" [label]="{text:'Nombre Programa'}" dataField="nombre">
                                <dxi-validation-rule type="required" ></dxi-validation-rule>
                              </dxi-item>
                              <dxi-item [colSpan]="1" [label]="{text:'Color'}" >
                                <div *dxTemplate >
                                  <dx-color-box id="color_id" dataField="programa.color" [(value)]="programa.color" ></dx-color-box>
                                </div>

                                <dxi-validation-rule type="required" ></dxi-validation-rule>
                              </dxi-item>
                              <dxi-item [colSpan]="2" itemType="button" horizontalAlignment="right" verticalAlignment="bottom"
                                [buttonOptions]="buttonOptionsNewPrograma">
                              </dxi-item>
                            </dxi-item>


                            <!-- pestaÃ±as -->
                            <dxi-item [colSpan]="2">
                              <dx-tab-panel [loop]="true" [animationEnabled]="true" [swipeEnabled]="true">
                                <dxi-item title="Manual de usuario">

                                </dxi-item>
                                <dxi-item title="Subindices">
                                  <div class="mb-2">
                                    <dx-button type="success" text="Agregar subindice" icon="fa fa-plus" (onClick)="showSubindicePopUp()"></dx-button>
                                  </div>


                                  <div class="card">
                                    <dx-data-grid id="gridContainer" [dataSource]="subindices" [remoteOperations]="false" [allowColumnReordering]="true"
                                      [rowAlternationEnabled]="true" [showBorders]="true">
                                      <dxo-filter-row [visible]="true"></dxo-filter-row>
                                      <dxo-paging [enabled]="true"></dxo-paging>
                                      <dxi-column dataField="nombre" caption="Nombre subindice"></dxi-column>
                                      <dxi-column caption="acciones" cellTemplate="fichaCellTemplate" alignment="center"[width]="150">
                                        <div *dxTemplate="let data of 'fichaCellTemplate'" style="display: block;" class="table-content-icons">
                                          <!-- <dx-button icon="fas fa-info" class="positionButon" hint="Detalles"  type="success"  (onClick)="detailsPrograma(data.data)"></dx-button> -->
                                          <!-- <dx-button icon="fas fa-edit" class="positionButon" hint="Editar"  type="default"  (onClick)="editPrograma(data.data)"></dx-button> -->
                                          <!-- <dx-button icon="fas fa-window-close"class="positionButon" hint="Eliminar"  type="danger" (onClick)="deletePrograma(data.data)"></dx-button> -->
                                          <!-- <dx-button icon="fas fa-folder" class="positionButon" hint="Eliminar"  type="success"  stylingMode="outlined"></dx-button> -->

                                        </div>
                                      </dxi-column>


                                    </dx-data-grid>
                                  </div>
                                  <form (submit)="formSubindiceSubmit($event)" >
                                    <dx-form [colCount]="2" [(formData)]="subindice" labelLocation="top" [disabled]="false" [readOnly]="false">
                                      <dxi-item itemType="group" [colCount]="2" [colSpan]="2">
                                        <dxi-item datafield="programa"></dxi-item>
                                        <dxi-item [colSpan]="1" itemType="button" horizontalAlignment="left" verticalAlignment="bottom"
                                        [buttonOptions]="buttonOptionsNewSubindice"></dxi-item>

                                        <dxi-item [colSpan]="2"></dxi-item>
                                      </dxi-item>

                                    </dx-form>
                                  </form>


                                </dxi-item>
                                <dxi-item title="Componentes">
                                  <dx-button type="success" text="Agregar componente" icon="fa fa-plus" (onClick)="formSubmit($event)"></dx-button>
                                  <dx-form>
                                    <dxi-item itemType="group" [colCount]="2" [colSpan]="2">
                                      <dxi-item [colSpan]="1" itemType="button" horizontalAlignment="left" verticalAlignment="bottom"
                                      [buttonOptions]="buttonOptionsNewComponente"></dxi-item>

                                      <dxi-item [colSpan]="2"></dxi-item>
                                    </dxi-item>

                                  </dx-form>
                                </dxi-item>

                              </dx-tab-panel>
                            </dxi-item>
                            <!-- boton de salida -->
                            <div class="mb-2">
                              <dx-button type="success" text="salir" icon="fa fa-plus" (onClick)="formSubmit($event)"></dx-button>
                            </div>

                          </dx-form>
                        </form>
                      </dx-popup>

                      <!-- popup subincice -->
                      <dx-popup [width]="600" [height]="200" [showTitle]="true" title="Crear nuevo subindice" [dragEnabled]="false"
                      [hideOnOutsideClick]="true" [showCloseButton]="true" [(visible)]="popupSubindiceVisible">
                      <form (submit)="formSubindiceSubmit($event)" >
                        <dx-form id="form" [colCount]="2" [(formData)]="subindice" labelLocation="top" [disabled]="false" [readOnly]="false">

                          <dxi-item [label]="{text:'Nombre subindice'}" dataField="nombre">
                            <dxi-validation-rule type="required" ></dxi-validation-rule>
                            <dxi-validation-rule
                              type="stringLength"
                              [min]="2"
                              message="Este campo debe tener al menos 2 caracteres"
                            ></dxi-validation-rule>
                          </dxi-item>

                          <dxi-item [colSpan]="2" itemType="button" horizontalAlignment="right" verticalAlignment="bottom"
                            [buttonOptions]="buttonOptionsSave">
                          </dxi-item>

                        </dx-form>
                      </form>

                    </dx-popup>
                      <!-- popup componente -->

                        <!-- /.card-body -->

                </div>
                <!-- /.col -->
            </div>
            <!-- /.row -->
        </div>
        <!-- /.container-fluid -->
    </section>
    <!-- /.content -->
</div>
<!-- /.content-wrapper -->
